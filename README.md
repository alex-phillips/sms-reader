# üì± SMS Archive Viewer
SMS Archive Viewer is a web-based tool for ingesting and browsing archived SMS and MMS conversations from various backup sources.

This project was built to preserve and explore personal messaging history in a readable, searchable format. It's built with a web-based frontend that mimics a modern day messaging app with conversation browsing, message history searching, and media viewing/ Inteded at preserving conversations and memories, it also provides an API for extending its use.

## ‚ú® Features
- Browse SMS and MMS conversations with a messaging app-style interface
- Search and filter by contact / conversation
- View media (photos, videos, etc.) embedded in MMS
- Group conversation support (MMS threads with multiple recipients)
- Mobile-friendly
- API-first backend with Swagger docs

## üìÇ Supported Import Formats
Currently, two archive formats are supported. These are the 2 formats I currently have of my own and can extend the application to support more by request.
- SMS Backup & Restore (Android) XML format generated by the SMS Backup & Restore app (attachments embedded in XML)
- iMessage CSV Export (~2015, not sure what app it was originated from) with separate attachments folder

## üê≥ Deployment via Docker
This application is containerized and follows the LinuxServer.io (LSIO) environment variable conventions for easy integration into homelab environments.

### Environment Variables
| Variable | Description                         |
| -------- | ----------------------------------- |
| `PUID`   | User ID the container runs as       |
| `PGID`   | Group ID the container runs as      |
| `TZ`     | Time zone (e.g. `America/New_York`) |

### Volume Mounts
| Container Path | Purpose                                      |
| -------------- | -------------------------------------------- |
| `/data`        | Contains the SQLite database and media files |

Media attachments from MMS messages are extracted and stored in /data/media/. The SQLite database containing contacts, messages, and conversation data also resides in /data.

### Example `docker run`
```
docker run -d \
  --name=sms-archive-viewer \
  -e PUID=1000 \
  -e PGID=1000 \
  -e TZ=America/New_York \
  -v /path/to/sms-data:/data \
  -p 8000:8000 \
  yourdockerhub/sms-archive-viewer
```
Then visit `http://localhost:8000`

## Importing Archives
Once deployed, you can import your archives by execing into the container and running one of the following import scripts:

The argument `USER_PHONE_NUMBER` is intended to be the phone number of the user that owns the archive. This is used to detect incoming vs outgoing messages.

### SMS Backup & Restore
```
python import_smsbackuprestore.py XML_FILE_LOCATION USER_PHONE_NUMBER
```

### iMessage CSV
```
python import_imessage_csv.py CSV_FILE_LOCATION USER_PHONE_NUMBER ATTACHMENTS_FOLDER_PATH
```
